<ViewPopup>:
    size_hint: None, None
    size: dp(450), dp(300)
    title: 'Set View Options'
    title_size: 20
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"
        Label:
            id: info_text
            text_size: self.size

        GridLayout:
            cols: 2
            row_default_height: dp(30)
            cols_minimum: {0: dp(150), 1: dp(150)}
            size_hint: (None, None)
            height: self.minimum_height
            PopupLabelCell:
                text: 'hide known'
            CheckBox:
                id: hide_known
            PopupLabelCell:
                text: 'sort by streak'
            CheckBox:
                id: cb_streak
                group: 'g_sort'
            PopupLabelCell:
                text: 'sort by question'
            CheckBox:
                id: cb_left
                group: 'g_sort'
            PopupLabelCell:
                text: 'sort by answer'
            CheckBox:
                id: cb_right
                group: 'g_sort'

        BoxLayout:
            size_hint_y: .8
            spacing: 1
            padding: 1
            NavbarButton:
                size_hint: 1, 0.4
                text: "Set"
                on_release:
                    root.set_options()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Cancel"
                on_release:
                    root.dismiss()

<CopyCardSetPopup>:
    size_hint: None, None
    size: dp(450), dp(400)
    title: 'Copy Card Set'
    title_size: 20
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"

        GridLayout:
            cols: 2
            row_default_height: dp(30)
            cols_minimum: {0: dp(50), 1: dp(300)}
            size_hint: (None, None)
            height: self.minimum_height
            PopupLabelCell:
                text: 'new name'
            TextInput:
                id: new_name
            PopupLabelCell:
                text: 'shuffle'
            CheckBox:
                id: cb_shuffle
            PopupLabelCell:
                text: 'swap Q/A'
            CheckBox:
                id: cb_swap
            PopupLabelCell:
                text: 'reset'
            CheckBox:
                id: cb_reset
            PopupLabelCell:
                text: 'apply question info'
            CheckBox:
                id: cb_apply_qi
            PopupLabelCell:
                text: 'apply answer info'
            CheckBox:
                id: cb_apply_ai


        Label:
            id: info_text
            text_size: self.size

        Label:
            id: alert
            color: 1, 0, 0, 1
            text: ''

        BoxLayout:
            size_hint_y: .8
            spacing: 1
            padding: 1
            NavbarButton:
                size_hint: 1, 0.4
                text: "Copy"
                on_release:
                    root.copy()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Cancel"
                on_release:
                    root.dismiss()

<ExportCardSetPopup>:
    size_hint: None, None
    size: dp(450), dp(400)
    title: 'Export Card Set'
    title_size: 20
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"

        GridLayout:
            cols: 2
            row_default_height: dp(30)
            cols_minimum: {0: dp(50), 1: dp(300)}
            size_hint: (None, None)
            height: self.minimum_height
            PopupLabelCell:
                text: 'filename'
            TextInput:
                id: filename

        Label:
            id: info_text
            text_size: self.size

        Label:
            id: alert
            color: 1, 0, 0, 1
            text: ''

        BoxLayout:
            size_hint_y: .8
            spacing: 1
            padding: 1
            NavbarButton:
                size_hint: 1, 0.4
                text: "Export"
                on_release:
                    root.export()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Cancel"
                on_release:
                    root.dismiss()

<EditCardSetPopup>:
    container: container
    size_hint: None, None
    size: dp(450), dp(500)
    title_size: 20
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"

        GridLayout:
            id: container
            cols: 2
            row_default_height: dp(30)
            cols_minimum: {0: dp(50), 1: dp(300)}
            size_hint: (None, None)
            height: self.minimum_height
            PopupLabelCell:
                text: 'name'
            TextInput:
                id: edit_name
            PopupLabelCell:
                text: 'description'
            TextInput:
                id: edit_description
            PopupLabelCell:
                text: '*question info'
            TextInput:
                id: edit_qi
            PopupLabelCell:
                text: '*answer info'
            TextInput:
                id: edit_ai

        Label:
            text: '*Default info for new cards.'

        Label:
            id: alert
            color: 1, 0, 0, 1
            text: ''

        BoxLayout:
            size_hint_y: .8
            spacing: 1
            padding: 1
            NavbarButton:
                size_hint: 1, 0.4
                text: "Save"
                on_release:
                    root.save()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Cancel"
                on_release:
                    root.cancel()

<NewCardPopup>:
    container: container
    size_hint: None, None
    size: dp(450), dp(500)
    title_size: 20
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"

        GridLayout:
            id: container
            cols: 2
            row_default_height: dp(30)
            cols_minimum: {0: dp(50), 1: dp(300)}
            size_hint: (None, None)
            height: self.minimum_height
            PopupLabelCell:
                text: 'question'
            TextInput:
                id: edit_q
            PopupLabelCell:
                text: 'answer'
            TextInput:
                id: edit_a
            PopupLabelCell:
                text: 'question info'
            TextInput:
                id: edit_qi
            PopupLabelCell:
                text: 'answer info'
            TextInput:
                id: edit_ai

        Label:
            text: '*Streak of correct answers.'

        Label:
            id: alert
            color: 1, 0, 0, 1
            text: ''

        BoxLayout:
            size_hint_y: .8
            spacing: 1
            padding: 1
            NavbarButton:
                size_hint: 1, 0.4
                text: "Save"
                on_release:
                    root.save()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Cancel"
                on_release:
                    root.cancel()

<FullEditCardPopup>:
    container: container
    size_hint: None, None
    size: dp(450), dp(500)
    title_size: 20
    auto_dismiss: False

    BoxLayout:
        orientation: "vertical"

        GridLayout:
            id: container
            cols: 2
            row_default_height: dp(30)
            cols_minimum: {0: dp(50), 1: dp(300)}
            size_hint: (None, None)
            height: self.minimum_height
            PopupLabelCell:
                text: 'question'
            TextInput:
                id: edit_q
            PopupLabelCell:
                text: 'answer'
            TextInput:
                id: edit_a
            PopupLabelCell:
                text: 'question info'
            TextInput:
                id: edit_qi
            PopupLabelCell:
                text: 'answer info'
            TextInput:
                id: edit_ai
            PopupLabelCell:
                text: '*streak'
            TextInput:
                id: edit_s
            PopupLabelCell:
                text: 'hidden until'
            TextInput:
                id: edit_hu

        Label:
            text: '*Streak of correct answers.'

        Label:
            id: alert
            color: 1, 0, 0, 1
            text: ''

        BoxLayout:
            size_hint_y: .8
            spacing: 1
            padding: 1
            NavbarButton:
                size_hint: 1, 0.4
                text: "Save"
                on_release:
                    root.save()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Delete"
                on_release:
                    root.delete()
            NavbarButton:
                size_hint: 1, 0.4
                text: "Cancel"
                on_release:
                    root.cancel()

<CardListLabel>:
    # Draw a background to indicate selection
    orientation: 'horizontal'
    padding: 0
    spacing: 1
    HiddenButton:
        id: btn_left
        halign: 'left'
        valign: 'top'
        on_press: root.edit()
        size_hint: 1, 1
        text_size: self.size[0] * .9, self.size[1] * .9
    HiddenButton:
        id: btn_right
        halign: 'left'
        valign: 'top'
        on_press: root.edit()
        size_hint: 1, 1
        text_size: self.size[0] * .9, self.size[1] * .9

<CardRV>:
    viewclass: 'CardListLabel'
    RecycleBoxLayout:
        orientation: 'vertical'
        default_size: None, dp(42)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height

<CardSetScreen>:
    box_card_table: box_card_table

    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            orientation: 'horizontal'
            spacing: 1
            padding: 1
            size_hint_y: 1
            NavbarButton:
                text: 'Back'
                on_press: root.manager.current = 'manage'
            NavbarButton:
                text: 'Export'
                on_press: root.export_popup()
            NavbarButton:
                text: 'Edit'
                on_press: root.edit_cardset()
            NavbarButton:
                text: 'Copy'
                on_press: root.copy_popup()
            NavbarButton:
                text: 'Delete'
                on_press: root.delete_set_popup()
            NavbarButton:
                text: 'View'
                on_press: root.view_popup()

        Label:
            size_hint_y: 1
            id: title
            font_size: 20

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.5
            padding: 3
            NavbarButton:
                text: 'New Card'
                on_press: root.new_card()

        BoxLayout:
            id: box_card_table
            orientation: 'vertical'
            size_hint_y: 9.5
